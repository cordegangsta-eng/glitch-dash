<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLITCH DASH | FULL SCREEN</title>
    <style>
        body { 
            margin: 0; 
            background: linear-gradient(-45deg, #050505, #0a0f1a, #1a0a1a, #050505);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: #fff; 
            font-family: 'Courier New', monospace; 
            overflow: hidden; 
            height: 100vh; 
            width: 100vw;
            user-select: none;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        canvas { 
            display: block; /* Removes any scrollbars */
            background: rgba(0, 0, 0, 0.0); /* Transparent so gradient shows through */
            cursor: pointer;
        }
        .ui { 
            position: absolute; 
            top: 30px; 
            left: 30px; 
            pointer-events: none; 
            text-shadow: 0 0 10px rgba(0,255,255,0.8);
            z-index: 10;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="ui">
        <span id="score">SCORE: 0 | BEST: 0</span>
    </div>
    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');

    // INITIAL FULL SCREEN SETUP
    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Game Variables
    let score = 0;
    let highScore = localStorage.getItem('glitchHighScore') || 0;
    let gameActive = true;
    let canRestart = false; 
    let speed = 7; // Faster speed for wider screens
    
    // Game Objects
    let particles = [];
    let obstacles = [];
    
    const player = {
        x: 100, // Player stays 100px from the left
        y: 0,   // Will be set automatically by gravity
        size: 30,
        color: '#00ffff',
        dy: 0,
        jumpForce: 13,
        gravity: 0.7,
        grounded: false,
        visible: true
    };

    // Initialize player y position
    player.y = canvas.height - player.size;

    class Particle {
        constructor(x, y, color) {
            this.x = x;
            this.y = y;
            this.size = Math.random() * 6 + 2;
            this.speedX = (Math.random() - 0.5) * 15;
            this.speedY = (Math.random() - 0.5) * 15;
            this.color = color;
            this.alpha = 1;
        }
        update() {
            this.x += this.speedX;
            this.y += this.speedY;
            this.alpha -= 0.02;
        }
        draw() {
            ctx.save();
            ctx.globalAlpha = this.alpha;
            ctx.fillStyle = this.color;
            ctx.shadowBlur = 10;
            ctx.shadowColor = this.color;
            ctx.fillRect(this.x, this.y, this.size, this.size);
            ctx.restore();
        }
    }

    function spawnObstacle() {
        if (!gameActive) return;
        const height = Math.random() * 80 + 30; // Taller obstacles for bigger screens
        obstacles.push({ 
            x: canvas.width, 
            y: canvas.height - height, 
            w: 30, 
            h: height, 
            color: '#ff00ff' 
        });
        
        let spawnRate = Math.max(600, (Math.random() * 1200 + 600) - (score * 5));
        setTimeout(spawnObstacle, spawnRate);
    }

    function update() {
        particles.forEach((p, i) => {
            p.update();
            if (p.alpha <= 0) particles.splice(i, 1);
        });

        if (!gameActive) return;

        player.dy += player.gravity;
        player.y += player.dy;

        //
